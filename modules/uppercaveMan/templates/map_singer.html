<!DOCTYPE html>
<html lang="en" style="height: 100%">
<head>
    <meta charset="UTF-8">
</head>
<body style="height: 100%; margin: 0">
<div id="container" style="height: 100%"></div>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts@5/dist/echarts.min.js"></script>
<script type="text/javascript" src="https://fastly.jsdelivr.net/npm/jquery"></script>
<script type="text/javascript" src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>

<!-- 歌单前十分享和收藏 -->
<script type="text/javascript">
    var mapsinger_data = {{mapsinger_data|tojson}}
    var dom = document.getElementById('container');
    var myChart = echarts.init(dom, null, {
        renderer: 'canvas',
        useDirtyRect: false
    });
    var app = {};
    var option;

    myChart.showLoading();
    $.get('/uppercaveMan/100000_full.json', function (geoJson) {

        myChart.hideLoading();
        echarts.registerMap('china', geoJson);
        option = {
            title: {
                text: '歌手地区分布图',
                subtext: '数据来自网易云歌手资料',
                sublink: 'https://music.163.com/#/discover/artist',
                x : 'center',
                y:  'top'
            },
            tooltip: {
                trigger: 'item',
                showDelay: 0,
                transitionDuration: 0.2
            },
            visualMap: {
                left: 'right',
                min: 0,
                max: 15,
                inRange: {
                    color: [
                        '#74add1',
                        '#e0f3f8',
                        '#fee090',
                        '#fdae61',
                        '#d73027',
                    ]
                },
                text: ['High', 'Low'],
                calculable: true
            },
            toolbox: {
                show: true,
                //orient: 'vertical',
                left: 'left',
                top: 'top',
                feature: {
                    dataView: {readOnly: false},
                    restore: {},
                    saveAsImage: {}
                }
            },
            series: [
                {
                    name: 'USA PopEstimates',
                    type: 'map',
                    map: 'china',
                    data: mapsinger_data
                }]};
  myChart.setOption(option)});

        if (option && typeof option === 'object') {
            myChart.setOption(option);
        }

        window.addEventListener('resize', myChart.resize);
</script>

</body>
</html>